<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos | AC Computers</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/eb36e646d1.js" crossorigin="anonymous"></script>
</head>
<body class="bg-[#242430] font-poppins text-white w-full"> 

    <!-- Encabezado -->
    <header class="w-full sticky top-0 px-3 py-2 z-[999]">
        <div id="navbar" class="max-w-[1200px] mx-auto flex justify-between items-center py-2 rounded-full px-7 duration-500">
            <!-- Logo empresa -->
            <a href="/" class="text-2xl md:text-[27px] text-[#7270ec] uppercase font-extrabold">AC Computers</a>

            <!-- Botón responsivo -->
            <div class="md:hidden" onclick="toggleMenu()">
                <i class="fas fa-bars text-2xl" id="toggle-icon"></i>
            </div>

            <!-- Menú de navegación -->
            <nav class="hidden md:flex gap-6 text-[19px]">
                <a href="/" class="duration-300 hover:scale-105 hover:text-[#7270ec]">Inicio</a>
                <a href="/products" class="duration-300 hover:scale-105 text-[#7270ec]">Productos</a>
                <a href="/contact" class="duration-300 hover:scale-105 hover:text-[#7270ec]">Contactanos</a>
            </nav>

            <!-- Botón de descarga -->
            <a href="/list" class="hidden md:block">
                <button class="tooltip tooltip-bottom tooltip-primary bg-transparent text-white" data-theme="luxury" data-tip="Descargar productos">
                    <i class="fas fa-circle-down text-[30px] duration-300 hover:text-[#7270ec]"></i>
                </button>
            </a>

        </div>
    </header>

    <nav id="navbar-responsive" class="fixed inset-0 bg-black bg-opacity-35 backdrop-blur-md z-[90] pt-[90px] flex flex-col align-items-center text-center text-xl gap-10 hidden">
        <a href="/" class="duration-300 hover:scale-105 hover:text-[#7270ec]">Inicio</a>
        <a href="/products" class="duration-300 hover:scale-105 text-[#7270ec]">Productos</a>
        <a href="/contact" class="duration-300 hover:scale-105 hover:text-[#7270ec]">Contactanos</a>
    </nav>

    <!-- Contenido principal -->
    <main class="w-full space-y-5 pt-10">
        <!-- Sección de listado de productos -->
        <section class="w-full px-3 py-10">
            <div class="w-full max-w-[1200px] mx-auto space-y-7">
                <h2 class="font-extrabold text-5xl text-center">Lista de Productos</h2>

                <div class="relative overflow-x-auto">
                    <table class="w-full text-sm text-left rtl:text-right text-zinc-400">
                        <thead class="text-xs uppercase bg-zinc-700 text-zinc-400">
                            <tr>
                                <th scope="col" class="px-6 py-3">
                                    Nombre
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Precio
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Descuento
                                </th>
                                <th scope="col" class="px-6 py-3 text-center">
                                    Información
                                </th>
                            </tr>
                        </thead>
                        <tbody id="prices-list">
                            <!-- Información -->
                        </tbody>
                    </table>
                </div>
                
            </div>
        </section>
    </main>
    
    <footer class="w-full px-3 py-5">
        <div class="max-w-[1200px] mx-auto flex flex-col md:flex-row justify-between gap-10 md:gap-3">
            <div class="space-y-2">
                <h4 class="font-extrabold text-lg">Enlaces</h4>
                <ul class="text-[#7270ec] space-y-1">
                    <a href="/">
                        <li class="hover:text-indigo-300 hover:underline">Inicio</li>
                    </a>
                    <a href="/products">
                        <li class="hover:text-indigo-300 hover:underline">Productos</li>
                    </a>
                    <a href="/contact">
                        <li class="hover:text-indigo-300 hover:underline">Contacto</li>
                    </a>
                    <a href="/list">
                        <li class="hover:text-indigo-300 hover:underline">Descargar lista productos</li>
                    </a>
                </ul>
            </div>
            <div class="space-y-2 max-w-[450px]">
                <h4 class="font-extrabold text-lg">Sobre nosotros</h4>
                <p class="text-[#7270ec]">
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dicta, blanditiis deleniti praesentium sequi molestias fugit quaerat adipisci ut ab hic recusandae, illum id delectus aliquam optio explicabo ad quas. Voluptatem voluptates commodi repellat obcaecati. Distinctio dolorum obcaecati natus laudantium, veniam ullam ea placeat dolore voluptas ex voluptates, cumque, est cum.
                </p>
            </div>
            <div class="space-y-2">
                <h4 class="font-extrabold text-lg">AC Computers</h4>
                <div class="size-[200px]">
                    <img src="/images/logo.jpg" alt="Logo empresa" class="object-cover h-full w-full">                    
                </div>
            </div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
    <script src="/js/swiper.js"></script>
    <script>
        // Agregar clase al header
        window.onscroll = () => {
            if (window.scrollY > 50) {
                document.querySelector('#navbar').classList.add('bg-black', 'bg-opacity-15', 'backdrop-blur-sm');
            } else {
                document.querySelector('#navbar').classList.remove('bg-black', 'bg-opacity-15', 'backdrop-blur-sm');
            }
        }

        function toggleMenu() {
            document.getElementById('navbar-responsive').classList.toggle('hidden');
            document.getElementById('toggle-icon').classList.toggle('fa-bars');
            document.getElementById('toggle-icon').classList.toggle('fa-x');
        }

        // Realizar consulta a la API y mostrar la información
        fetch('/api/products?limit=100')
        .then(response => response.json())
        .then(data => {
            // Lista de precios
            const listPrices = document.getElementById('prices-list');
            data.products.forEach(product => {
                const listPrice = document.createElement('tr');
                listPrice.className = 'border-b bg-zinc-800 border-zinc-700 hover:bg-zinc-600 duration-300';
                listPrice.innerHTML = `
                    <th scope="row" class="px-6 py-4 font-medium whitespace-nowrap text-white">
                        ${product.product_name}
                    </th>
                    <td class="px-6 py-4">
                        COP ${Number(product.product_price - (product.product_price * (product.product_discount / 100))).toLocaleString("es-CO")}
                    </td>
                    <td class="px-6 py-4">
                        ${product.product_discount == 0 ? 'Sin descuento' : product.product_discount + "%"}
                    </td>
                    <td class="px-6 py-4">
                        <a href="/product/${product.product_id}" class="w-full">
                            <button class="w-full px-7 py-1 border border-[#7270ec] rounded-full mx-auto">
                                Ver
                            </button>
                        </a>
                    </td>
                `;
                listPrices.appendChild(listPrice);
            });
        });
    </script>
</body>
</html>