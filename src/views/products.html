<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos | AC Computers</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://kit.fontawesome.com/eb36e646d1.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
</head>
<body class="bg-[#242430] font-poppins text-white w-full"> 

    <header class="w-full sticky top-0 bg-opacity-40 px-3 py-2 z-[999]">
        <div id="navbar" class="max-w-[1200px] mx-auto flex justify-between items-center py-2 rounded-full px-7 duration-500">
            <!-- Logo empresa -->
            <a href="/" class="text-2xl md:text-[27px] text-[#7270ec] uppercase font-extrabold">AC Computers</a>

            <!-- Botón responsivo -->
            <div class="md:hidden">
                <i class="fas fa-bars text-2xl"></i>
            </div>

            <!-- Menú de navegación -->
            <nav class="hidden md:flex gap-6 text-[19px]">
                <a href="/" class="duration-300 hover:scale-105 hover:text-[#7270ec]">Inicio</a>
                <a href="/products" class="duration-300 hover:scale-105 text-[#7270ec]">Productos</a>
                <a href="/contact" class="duration-300 hover:scale-105 hover:text-[#7270ec]">Contactanos</a>
            </nav>

            <!-- Botón de descarga -->
            <a href="/list">
                <button data-tooltip-target="tooltip-bottom" data-tooltip-placement="bottom" type="button">
                    <i class="fas fa-circle-down text-[30px] duration-300 hover:text-[#7270ec]"></i>
                </button>
                
                <div id="tooltip-bottom" role="tooltip" 
                class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 tooltip">
                    Descargar productos
                    <div class="tooltip-arrow" data-popper-arrow></div>
                </div>
            </a>
        </div>
    </header>

    <main class="w-full space-y-5 pt-10">
        <!-- Sección de listado de productos -->
        <section class="w-full px-3 py-10">
            <div class="w-full max-w-[1200px] mx-auto space-y-7">
                <h2 class="font-extrabold text-5xl text-center">Lista de Productos</h2>

                <div class="relative overflow-x-auto">
                    <table class="w-full text-sm text-left rtl:text-right text-zinc-400">
                        <thead class="text-xs uppercase bg-zinc-700 text-zinc-400">
                            <tr>
                                <th scope="col" class="px-6 py-3">
                                    Nombre
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Precio
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Descuento
                                </th>
                                <th scope="col" class="px-6 py-3 text-center">
                                    Información
                                </th>
                            </tr>
                        </thead>
                        <tbody id="prices-list">
                            <!-- Información -->
                        </tbody>
                    </table>
                </div>
                
            </div>
        </section>
    </main>

    <footer class="w-full px-3 py-5">
        <div class="max-w-[1200px] mx-auto flex justify-between">
            <div class="space-y-4">
                <h4>Enlaces</h4>
                <ul class="text-[#7270ec] space-y-2">
                    <a href="/">
                        <li class="hover:text-indigo-300 hover:underline">Inicio</li>
                    </a>
                    <a href="/products">
                        <li class="hover:text-indigo-300 hover:underline">Productos</li>
                    </a>
                    <a href="/contact">
                        <li class="hover:text-indigo-300 hover:underline">Contacto</li>
                    </a>
                    <a href="/list">
                        <li class="hover:text-indigo-300 hover:underline">Descargar lista productos</li>
                    </a>
                </ul>
            </div>
            <div class="space-y-4 max-w-[450px]">
                <h4>Sobre nosotros</h4>
                <p class="text-[#7270ec] space-y-2">
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dicta, blanditiis deleniti praesentium sequi molestias fugit quaerat adipisci ut ab hic recusandae, illum id delectus aliquam optio explicabo ad quas. Voluptatem voluptates commodi repellat obcaecati. Distinctio dolorum obcaecati natus laudantium, veniam ullam ea placeat dolore voluptas ex voluptates, cumque, est cum.
                </p>
            </div>
            <div class="space-y-4">
                <h4>AC Computers</h4>
                <div class="size-[200px]">
                    <img src="/images/logo.jpg" alt="Logo empresa" class="object-cover h-full w-full">                    
                </div>
            </div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
    <script src="/js/swiper.js"></script>
    <script>
        // Agregar clase al header
        window.onscroll = () => {
            if (window.scrollY > 50) {
                document.querySelector('#navbar').classList.add('bg-black', 'bg-opacity-15', 'backdrop-blur-sm');
            } else {
                document.querySelector('#navbar').classList.remove('bg-black', 'bg-opacity-15', 'backdrop-blur-sm');
            }
        }

        // Realizar consulta a la API y mostrar la información
        fetch('/api/products')
        .then(response => response.json())
        .then(data => {
            // Lista de precios
            const listPrices = document.getElementById('prices-list');
            data.forEach(product => {
                const listPrice = document.createElement('tr');
                listPrice.className = 'border-b bg-zinc-800 border-zinc-700 hover:bg-zinc-600 duration-300';
                listPrice.innerHTML = `
                    <th scope="row" class="px-6 py-4 font-medium whitespace-nowrap text-white">
                        ${product.product_name}
                    </th>
                    <td class="px-6 py-4">
                        COP ${Number(product.product_price - (product.product_price * (product.product_discount / 100))).toLocaleString("es-CO")}
                    </td>
                    <td class="px-6 py-4">
                        ${product.product_discount == 0 ? 'Sin descuento' : product.product_discount + "%"}
                    </td>
                    <td class="px-6 py-4">
                        <a href="/product/${product.product_id}" class="w-full">
                            <button class="w-full px-7 py-1 border border-[#7270ec] rounded-full mx-auto">
                                Ver
                            </button>
                        </a>
                    </td>
                `;
                listPrices.appendChild(listPrice);
            });
        });
    </script>
</body>
</html>